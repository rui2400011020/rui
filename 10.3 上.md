```
n,m,k=map(int,input().split())
b=[]
for _ in range(n):
    b.append([0]*m)
Step1=[]
Step2=[]
for _ in range(k):
    step1,step2=map(int,input().split())
    Step1.append(step1)
    Step2.append(step2)
if n==1 or m==1:
    print(0)
else:
    flag=0
    for t in range(k):
        x=Step1[t]
        y=Step2[t]
        b[x-1][y-1]=1
        if x!=1 and y!=1 and x!=n and y!=m:
            if (b[x-2][y-2] and b[x-2][y-1] and b[x-1][y-2]) or (b[x-2][y-1] and b[x-2][y] and b[x-1][y]) or (b[x-1][y-2] and b[x][y-2] and b[x][y-1]) or (b[x][y-1] and b[x-1][y] and b[x][y]):
                print(t+1)
                break
            else:
                flag+=1
        elif x==1 and y!=1 and y!=m:
            if (b[0][y-2] and b[1][y-2] and b[1][y-1]) or (b[1][y-1] and b[0][y] and b[1][y]):
                print(t+1)
                break
            else:
                flag+=1
        elif x==n and y!=1 and y!=m:
            if (b[n-2][y-2] and b[n-1][y-2] and b[n-2][y-1]) or (b[n-2][y-1] and b[n-2][y] and b[n-1][y]):
                print(t+1)
                break
            else:
                flag+=1
        elif y==1 and x!=1 and x!=n:
            if (b[x-2][0] and b[x-2][1] and b[x-1][1]) or (b[x-1][1] and b[x][0] and b[x][1]):
                print(t+1)
                break
            else:
                flag+=1
        elif y==m and x!=1 and x!=n:
            if (b[x-2][m-2] and b[x-2][m-1] and b[x-1][m-2]) or (b[x-1][m-2] and b[x][m-2] and b[x][m-1]):
                print(t+1)
                break
            else:
                flag+=1
        elif x==1 and y==1:
            if b[0][1] and b[1][0] and b[1][1]:
                print(t+1)
                break
            else:
                flag+=1
        elif x==1 and y==m:
            if b[0][m-2] and b[1][m-2] and b[1][m-1]:
                print(t+1)
                break
            else:
                flag+=1
        elif x==n and y==1:
            if b[n-2][0] and b[n-2][1] and b[n-1][1]:
                print(t+1)
                break
            else:
                flag+=1
        elif x==n and y==m:
            if b[n-2][m-2] and b[n-2][m-1] and b[n-1][m-2]:
                print(t+1)
                break
            else:
                flag+=1
    if flag==k:
        print(0)
```

![image-20241026180709056](C:\Users\huawei\AppData\Roaming\Typora\typora-user-images\image-20241026180709056.png)